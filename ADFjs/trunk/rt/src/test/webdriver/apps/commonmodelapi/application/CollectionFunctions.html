<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=windows-1252"/>
        <title>Collection Functions</title>

         <link rel="stylesheet" href="../../common/css/libs/oj/v@jetversion@/alta/oj-alta.css" type="text/css"/>

				<!-- following script tag is needed for automated test --> <!-- specify the name of the application specific java file
						as the value of 'currentTestApp' -->
				<script> var currentTestApp = '../../commonmodelapi/application/js/collectionFunctions'; </script>
    	<script data-main="../../common/js/main" src="../../common/js/libs/require/require.js"></script>
    </head>
    <body>
        <div id="homeContainer">

            <script type="text/html" id="row_tmpl1">
                <tr>
                    <td>
                        <a data-bind="attr: {id: 'delete' + Deptno}, click: $root.deleteDept">
                            <img src="images/delete_ena.png" height="16" width="16"/></a>
                    </td>
                    <td>
                        <a data-bind="attr: {id: 'edit'+ Deptno}, click: $root.editDept">
                            <img src="images/editrec.gif" height="16" width="16"/></a>
                    </td>
                    <td data-bind="text: Deptno">
                    </td>
                    <td data-bind="text: Dname">
                    </td>
                    <td data-bind="text: Loc">
                    </td>
                    <td>
                        <a data-bind="click: function(data, event) { $root.displayEmployees(link, Deptno, data, event)   },
                                attr: {id: 'ShowEmp' + Deptno, title: 'Click to see a list of employees'},
                                text: 'ShowEmployees'"></a>
                    </td>
                </tr>
            </script>

            <script type="text/html" id="row_tmpl2">
                <tr>
                    <td>
                        <a data-bind="attr: {id: 'deleteEmp' + Empno}, click: $root.deleteEmployee">
                            <img src="images/delete_ena.png" height="16" width="16"/></a>
                    </td>
                    <td>
                        <a data-bind="attr: {id: 'editEmp' + Empno}, click: $root.editEmployee">
                            <img src="images/editrec.gif" height="16" width="16"/></a>
                    </td>
                    <td data-bind="text: Empno">
                    </td>
                    <td data-bind="text: Ename">
                    </td>
                    <td data-bind="text: Job">
                    </td>
                </tr>
            </script>

            <div class="oj-row">
                <div class="oj-xl-3 oj-lg-6 oj-md-12 oj-col">

                    <button id="displayProperties" type="button" data-bind="click: displayCollectionProperties,
                        ojComponent:{component:'ojButton', label:'Display Collection Properties'}">
                    </button><br/>
                    <div id="resultsFunction"
                         style="float:left;width:550px; height: 300px; border:1px solid black;
                         color:blue;font-size:14px;text-align:center;vertical-align:middle;line-height:40px;"
                         tabindex="1"></div>
                </div>




                <div class="oj-xl-3 oj-lg-6 oj-md-12 oj-col">

                <button id="testSetRangeLocal" type="button" data-bind="click: testSetRangeLocal,
                        ojComponent:{component:'ojButton', label:'Test Set Range Local'}">
                    </button>
                    <span> Please enter the department number of Model you need to fetch</span>
                    <input type="text" id="deptNoToFetch" data-bind="ojComponent: {component: 'ojInputText', value: deptToFetch}"/> <br/>

                    <button id="displayModelProperties" type="button" data-bind="click: displayModelProperties,
                        ojComponent:{component:'ojButton', label:'Display Model Properties'}">
                    </button>

                    <button id="modelAttributes" type="button" data-bind="click: modelAttributes,
                        ojComponent:{component:'ojButton', label:'Display Model Attributes'}">
                    </button>

                    <button id="testlastIndexOf" type="button" data-bind="click: getLastIndexOfModel, ojComponent:{component:'ojButton', label:'Get lastIndex of model with entered deptno'}">
                    </button><br/>

                    <button id="findWhereId" type="button" data-bind="click: findWhereByDeptNo, ojComponent:{component:'ojButton', label:'Display Model Properties by using findWhere Method'}">
                    </button>

                    <button id="removeDept" type="button" data-bind="click: removeDept, ojComponent:{component:'ojButton', label:'Remove Department from Collection alone'}">
                    </button>

                    <button id="unSetandSet" type="button" data-bind="click: unSetandSet, ojComponent:{component:'ojButton', label:'Unset and Set attributes'}">
                    </button><br/><br/>


                    <p> Get Model at index</>
                        <input type="text" id="index" data-bind="ojComponent: {component: 'ojInputText', value: index}"/>
                        <button id="getModelAt" type="button" data-bind="click: getModelAt,
                        ojComponent:{component:'ojButton', label:'Get Model at index'}">
                        </button><br/>

                        <button id="getMore" type="button" data-bind="click: fetchMore, ojComponent:{component:'ojButton', label:'Get More Data',disabled: noMoreData}">
                        </button>

                        <button id="eachFunction" type="button" data-bind="click: displayModelUsingEach, ojComponent:{component:'ojButton', label:'Display Model Using Each'}">
                        </button>

                        <button id="filterFunction" type="button" data-bind="click: displayModelUsingFilter, ojComponent:{component:'ojButton', label:'Filter Model with Deptno 10 and 30'}">
                        </button>

                        <button id="getFirst" type="button" data-bind="click: getFirstModel, ojComponent:{component:'ojButton', label:'Get First Model'}">
                        </button>

                        <button id="getFirst5Model" type="button" data-bind="click: getFirst5Model, ojComponent:{component:'ojButton', label:'Get First Five Models'}">
                        </button><br/>

                        <button id="getLast" type="button" data-bind="click: getLastModel, ojComponent:{component:'ojButton', label:'Get Last Model'}">
                        </button>

                        <button id="getLast5Model" type="button" data-bind="click: getLast5Model, ojComponent:{component:'ojButton', label:'Get Last Five Models'}">
                        </button>


                        <button id="getMax" type="button" data-bind="click: getMax, ojComponent:{component:'ojButton', label:'Get max by Deptno'}">
                        </button>

                        <button id="getMin" type="button" data-bind="click: getMin, ojComponent:{component:'ojButton', label:'Get min by Deptno'}">
                        </button>

                        <button id="pluckAllDeptByName" type="button" data-bind="click: pluckAllDeptByName, ojComponent:{component:'ojButton', label:'Pluck All Dept by Dname'}">
                        </button>

                        <button id="pushNewDept" type="button" data-bind="click: pushNewDept, ojComponent:{component:'ojButton', label:'Push New Dept'}">
                        </button><br/>

                        <button id="popNewDept" type="button" data-bind="click: popNewDept, ojComponent:{component:'ojButton', label:'Pop New Dept'}">
                        </button>

                         <button id="shiftDept" type="button" data-bind="click: shiftDept, ojComponent:{component:'ojButton', label:'Shift Dept(Removes a row from top)'}">
                        </button>

                         <button id="unShiftDept" type="button" data-bind="click: unShiftDept, ojComponent:{component:'ojButton', label:'UnShift Dept(Adds a row to top)'}">
                        </button>

                        <button id="sliceDept" type="button" data-bind="click: sliceDept, ojComponent:{component:'ojButton', label:'Slice Dept from Index 3'}">
                        </button>

                        <button id="withoutDept30" type="button" data-bind="click: withoutModels, ojComponent:{component:'ojButton', label:'Display Models without Model 30 and 20'}">
                        </button><br/>

                        <button id="changeSortDirection" type="button" data-bind="click: changeSortDirection,
                        ojComponent:{component:'ojButton', label:'Change Sort Direction'}">
                        </button>
                        <label for="combobox">Change Sort Comparator</label>
                        <input id="comboboxSortComp" data-bind="ojComponent: {component: 'ojCombobox',
                           options: comparatorOptions, optionChange: changeComparator, rootAttributes: {style:'max-width:20em'}}"/>

                        <label for="combobox">Sort By</label>
                        <input id="comboboxSortBy" data-bind="ojComponent: {component: 'ojCombobox',
                           options: sortByOptions, optionChange: sortBy, rootAttributes: {style:'max-width:20em'}}"/>
                        <br/>

                        <button id="testSyncMethodOptions" type="button" data-bind="click: testSyncMethodOptions, ojComponent:{component:'ojButton', label:'Test Sync Method Options'}">
                        </button><br/>
                </div>
            </div>



            <div class="oj-row">
                <div class="oj-xl-3 oj-lg-6 oj-md-12 oj-col">

                    <div id="colldataSource" class="seven columns">

                        <b> Table using Paging Collection Table DataSource</b>
                        <br/>
                        <b> Department Table</b><br/>
                        <table id="deptTable" style="height: 400px; min-height: 200px; width: 500px;"
                               data-bind="ojComponent: {component: 'ojTable', data: collTableDatasource,
                                   selectionMode: {row: 'single', column: 'single'},
                                  columnsDefault: {headerStyle: 'text-align: left; white-space:nowrap;'},
                                  columns:
                                  [{displayIndex: 0,headerText: 'Delete', field: 'delete',id: 'column0'},
                                  {displayIndex: 1,headerText: 'Edit', field: 'delete',id: 'column1'},
                                  {displayIndex: 2,headerText: 'Deptno', field: 'Deptno',id: 'column2'},
                                  {displayIndex: 3,headerText: 'Dname', field: 'Dname',id: 'column3'},
                                  {displayIndex: 4,headerText: 'Loc', field: 'Loc',id: 'column4'},
                                  {displayIndex: 5,headerText: 'ShowEmployees', field: 'ShowEmployees',id: 'column5'}
                              ], rowTemplate: 'row_tmpl1'}">
                        </table>
                        <br/>
                        <div id="paging"
                             data-bind="ojComponent: {component: 'ojPagingControl', mode: 'loadMore', data: collTableDatasource, pageSize: 5}" class="oj-pagingcontrol-table-border" style="position: relative; top: -5px;"/>


                    </div>
                </div>
            </div>

            </div>

            <div class="oj-row">

            <div class="oj-xl-3 oj-lg-6 oj-md-12 oj-col">


                <!-- A simple form is used to add a new department record. -->
                <div id="addDept">

                    <div id="newDeptForm">
                        <form class="oj-form oj-md-odd-cols-6 oj-md-labels-inline" data-bind="submit: addDepartment">
                            <h3>Enter New Department Information</h3><hr/>
                            <div class="oj-row">
                                <div class="oj-col">
                                    <label for="newDepartId" class="oj-label">Department Id</label>
                                </div>
                                <div class="oj-col">
                                    <input id="newDepartId" value="555" class="oj-text-input" data-bind="ojComponent:{component:'ojInputNumber'}" />
                                </div>
                            </div>
                            <div class="oj-row">
                                <div class="oj-col">
                                    <label for="newDepartName" class="oj-label">Department Name</label>
                                </div>
                                <div class="oj-col">
                                    <input id="newDepartName" maxlength='30' placeholder="enter new name" data-bind="ojComponent:{component:'ojInputText'}"/>
                                </div>
                            </div>
                            <div class="oj-row">
                                <div class="oj-col">
                                    <label for="newLoc" class="oj-label">Location</label>
                                </div>
                                <div class="oj-col">
                                    <input id="newLoc" maxlength='30' placeholder="enter new Location" data-bind="ojComponent:{component:'ojInputText'}"/>
                                    <button id="saveBtnDept" class="oj-button" type="submit" data-bind="ojComponent:{component:'ojButton', label: 'Add Department'}"></button>
                                </div>
                            </div>
                        </form>
                    </div>

                </div>


                    <div id="update-form"  data-bind="ojComponent:{component: 'ojDialog', title: 'Update selected department',  initialVisibility:'hide'}">
                        <div class="oj-dialog-body">
                            <div id="form-container" class="oj-form">
                                <p class="validateTips">All form fields are required.</p>
                                <label for="deptno1" class="oj-label-inline">Id</label>
                                <input type="text" name="deptno1" id="deptno1" readonly="readonly"
                                       data-bind="ojComponent:{component: 'ojInputText'}"/><br/>
                                <label for="dname1" class="oj-label-inline">Name</label>
                                <input type="text" name="dname1" id="dname1"
                                       data-bind="ojComponent:{component: 'ojInputText'}"/><br/>
                                <label for="loc1" class="oj-label-inline">Loc</label>
                                <input type="text" name="loc1" id="loc1"
                                       data-bind="ojComponent:{component: 'ojInputText'}"/><br/>

                            </div>
                        </div>
                        <div id="okButton1" class="oj-dialog-footer">
                            <button id="updateBtnDept" type="submit" data-bind="ojComponent:{component: 'ojButton', label: 'Update'}, click: updateDepartment"></button>

                        </div>

                    </div>

                </div>

            </div>

            <div class="oj-row">
                <div class="oj-xl-3 oj-lg-6 oj-md-12 oj-col">

                    <div id="employeeContent" >
                        <b><label for="mydeptno" class="oj-label-inline">Dept Number: </label>
                            <span data-bind="text: mydeptno"></span></b><br/>


                        <br/><p><b> Employee Table</p><span id="noEmployees" data-bind="visible: noEmployees">There are no employees in this department</span></b><br/>
                        <table id="empTable" style="height: 400px; min-height: 200px; width: 400px;"
                               data-bind="ojComponent: {component: 'ojTable', data: collEmpTableDatasource,
                                  selectionMode: {row: 'single', column: 'single'},
                                  columnsDefault: {headerStyle: 'text-align: left; white-space:nowrap;'},
                                  columns:
                                  [{displayIndex: 0,headerText: 'Delete', field: 'delete',id: 'column0'},
                                  {displayIndex: 1,headerText: 'Edit', field: 'edit',id: 'column1'},
                                  {displayIndex: 2,headerText: 'Empno', field: 'Empno',id: 'column2'},
                                  {displayIndex: 3,headerText: 'Ename', field: 'Ename',id: 'column3'},
                                  {displayIndex: 4,headerText: 'Job', field: 'Job',id: 'column4'}
                              ], rowTemplate: 'row_tmpl2'}">
                        </table>
                    </div>
                </div>
                <div class="oj-xl-3 oj-lg-6 oj-md-12 oj-col">

                    <div id="addEmp">

                        <div id="newEmpForm">
                            <form class="oj-form oj-md-odd-cols-6 oj-md-labels-inline" data-bind="submit: addEmployee">
                                <h3>Enter New Employee Information</h3><hr/>
                                <div class="oj-row">
                                    <div class="oj-col">
                                        <label for="newEmpId" class="oj-label">Employee Number</label>
                                    </div>
                                    <div class="oj-col">
                                        <input id="newEmpId" class="oj-text-input" value="9000" data-bind="ojComponent:{component:'ojInputText'}" />
                                    </div>
                                </div>
                                <div class="oj-row">
                                    <div class="oj-col">
                                        <label for="newEmpName" class="oj-label">Employee Name</label>
                                    </div>
                                    <div class="oj-col">
                                        <input id="newEmpName" maxlength='30' placeholder="enter new name" data-bind="ojComponent:{component:'ojInputText'}"/>
                                    </div>
                                </div>
                                <div class="oj-row">
                                    <div class="oj-col">
                                        <label for="newJob" class="oj-label">Job</label>
                                    </div>
                                    <div class="oj-col">
                                        <input id="newJob" maxlength='30' value="CLERK" placeholder="enter new Job" data-bind="ojComponent:{component:'ojInputText'}"/>
                                        </div>
                                </div>
                                <div class="oj-row">
                                    <div class="oj-col">
                                        <label for="newDeptno" class="oj-label">Department Number</label>
                                    </div>
                                    <div class="oj-col">
                                        <input id="newDeptno" disabled="true" class="oj-text-input" data-bind="ojComponent:{component:'ojInputText', value: mydeptno }" />
                                         <button id="saveBtnEmp" class="oj-button" type="submit" data-bind="ojComponent:{component:'ojButton', label: 'Add Employee'}"></button>
                                    </div>
                                </div>

                            </form>
                        </div>
                    </div>


                    <div id="update-empform"  data-bind="ojComponent:{component: 'ojDialog', title: 'Update selected Employee',  initialVisibility:'hide'}">
                        <div class="oj-dialog-body">
                            <div id="form-container" class="oj-form">
                                <p class="validateTips">All form fields are required.</p>
                                <label for="empno" class="oj-label-inline">Emp Number</label>
                                <input type="text" name="empno" id="empno" readonly="readonly"
                                       data-bind="ojComponent:{component: 'ojInputText'}"/><br/>
                                <label for="ename" class="oj-label-inline">Emp Name</label>
                                <input type="text" name="ename" id="ename"
                                       data-bind="ojComponent:{component: 'ojInputText'}"/><br/>
                                <label for="job" class="oj-label-inline">Job</label>
                                <input type="text" name="job" id="job"
                                       data-bind="ojComponent:{component: 'ojInputText'}"/><br/>
                                <label for="deptno" class="oj-label-inline">Dept Number</label>
                                <input type="text" name="deptno" id="deptno" disabled="true"
                                       data-bind="ojComponent:{component: 'ojInputText', value: mydeptno}"/><br/>

                            </div>
                        </div>
                        <div id="okButton1" class="oj-dialog-footer">
                            <button id="updateBtnEmp" type="submit" data-bind="ojComponent:{component: 'ojButton', label: 'Update'}, click: updateEmployee"></button>

                        </div>

                    </div>

                </div>
            </div>

    </div>
</body>
</html>